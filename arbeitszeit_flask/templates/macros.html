{% from 'macros/show_notifications.html' import show_notifications %}

{% macro start_hilfe() %}
<div class="hero-body">
  <div class="container has-text-centered">
    <h1 class="title">Was ist das hier?</h1>
    <div class="block content has-text-left">
      <ul>
        <li>Dies ist eine Plattform für solidarisches Wirtschaften.</li>
        <li>
          Produkte und Dienstleistungen werden ausgetauscht, wobei die
          gemeinsame „Währung“ die Arbeitszeit ist.
        </li>
        <li>
          ArbeiterInnen bekommen für geleistete Arbeit Arbeitszeitgeld, mit dem
          sie Produkte erwerben können.
        </li>
        <li>
          Produkte kosten soviel Arbeitszeit, wie sie zur Herstellung benötigen.
        </li>
        <li>
          Die Plattform richtet sich an Kollektivbetriebe, Genossenschaften und
          sonstige Betriebe und Einzelpersonen, die eine Alternative zu
          kapitalistischem Markt, Privateigentum an Produktionsmitteln und Geld
          suchen.
        </li>
      </ul>
    </div>

    <h1 class="title">Was muss ich als ArbeiterIn tun?</h1>

    <div class="block content has-text-left">
      <ul>
        <li>
          ...
        </li>
      </ul>
    </div>

    <h1 class="title">Was muss ich als Betrieb/Kollektiv tun?</h1>

    <div class="block content has-text-left">
      <ol>
        <li>Stelle dich und deinen Betrieb beim Plenum vor.</li>
        <li>Registriere in der App einen „Betriebe-Account“.</li>
        <li>
          Veröffentliche in der App einen Plan für jedes Produkt, das du
          anbieten möchtest. In diesem Plan musst du angeben, wie viel
          Arbeitszeit die Herstellung dieses Produkts kostet.
        </li>
        <li>
          Du erhältst Arbeitszeit-Guthaben, um die Beschäftigten zu bezahlen und
          ein Konto, um Produktionsmittel von anderen teilnehmenden Betrieben zu
          erwerben.
        </li>
        <li>
          Veröffentliche das Produkt auf unserem Marktplatz oder wo immer du
          willst (deine Kunden brauchen nur Arbeitszeitgeld auf ihrem Konto und
          den Link zum Produkt). Der „Preis“ des Produktes entspricht immer
          genau der im Plan angegebenen Arbeitszeit.
        </li>
      </ol>
    </div>

    <hr />

    <p class="title">FAQ</p>
    <div class="block content has-text-left">
      <ul>
        <li>...?</li>
        <ul>
          <li>...</li>
        </ul>
        <li>...?</li>
        <ul>
          <li>...</li>
        </ul>
      </ul>
    </div>
  </div>
</div>
{% endmacro %}

{% macro statistics(view_model) %}
<div class="section has-text-centered">
  <div class="columns is-centered">
    <div class="column is-half">
      <div class="content">
        <h1 class="title">{{ gettext("Global statistics") }}</h1>
      </div>

      <br />

      <div class="level">
        <div class="level-left">
          <div class="level-item">
            <p class="has-text-weight-semibold">{{ gettext("Registered companies") }}:</p>
          </div>
        </div>
        <div class="level-right">
          <div class="level-item">
            <p>{{ view_model.registered_companies_count }}</p>
          </div>
        </div>
      </div>
      <div class="level">
        <div class="level-left">
          <div class="level-item">
            <p class="has-text-weight-semibold">{{ gettext("Registered workers") }}:</p>
          </div>
        </div>
        <div class="level-right">
          <div class="level-item">
            <p>{{ view_model.registered_members_count }}</p>
          </div>
        </div>
      </div>
      <br />
      <div class="level">
        <div class="level-left">
          <div class="level-item">
            <p class="has-text-weight-semibold">{{ gettext("Active plans") }}:</p>
          </div>
        </div>
        <div class="level-right">
          <div class="level-item">
            <p>{{ view_model.active_plans_count }}</p>
          </div>
        </div>
      </div>
      <div class="level">
        <div class="level-left">
          <div class="level-item">
            <p class="has-text-weight-semibold">{{ gettext("Public active plans") }}:</p>
          </div>
        </div>
        <div class="level-right has-text-right-tablet">
          <div class="level-item">
            <p>{{ view_model.active_plans_public_count }}</p>
          </div>
        </div>
      </div>
      <div class="level">
        <div class="level-left">
          <div class="level-item">
            <p class="has-text-weight-semibold">{{ gettext("Average plan duration") }}:</p>
          </div>
        </div>
        <div class="level-right has-text-right-tablet">
          <div class="level-item">
            <p>{{ view_model.average_timeframe_days }}</p>
          </div>
        </div>
      </div>
      <br />
      <div class="level">
        <div class="level-left">
          <div class="level-item">
            <p class="has-text-weight-semibold">
              {{ gettext("Currently planned work") }}:
            </p>
          </div>
        </div>
        <div class="level-right has-text-right-tablet">
          <div class="level-item">
            <p>{{ view_model.planned_work_hours }}</p>
          </div>
        </div>
      </div>
      <div class="level">
        <div class="level-left">
          <div class="level-item">
            <p class="has-text-weight-semibold">{{ gettext("Currently planned liquid means") }}:</p>
          </div>
        </div>
        <div class="level-right has-text-right-tablet">
          <div class="level-item">
            <p>{{ view_model.planned_resources_hours }}</p>
          </div>
        </div>
      </div>
      <div class="level">
        <div class="level-left">
          <div class="level-item">
            <p class="has-text-weight-semibold">
              {{ gettext("Currently planned fixed means") }}:
            </p>
          </div>
        </div>
        <div class="level-right has-text-right-tablet">
          <div class="level-item">
            <p>{{ view_model.planned_means_hours }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endmacro %}


{% macro plan_summary(view_model) %}
<div class="columns is-centered">
  <div class="column is-two-thirds">
    <div class="content">
      <h1 class="title">
        {{ gettext("Planning information") }}
      </h1>
    </div>
    {{ show_notifications() }}
    <br>
    <div class="table-container">
      <table class="table is-fullwidth">
        <tbody>
          {% for key in view_model.summary %}
          <tr>
            <td class="has-text-left has-text-weight-semibold">{{ view_model.summary[key][0] }}</td>
            {% if key == "description" %}
            <td class="has-text-left">{% for paragraph in view_model.summary[key][1] %}{{ paragraph }}<br>{% endfor %}
            </td>
            {% elif key == "price_per_unit" %}
            <td class="has-text-left">{{ view_model.summary[key][1] }}{% if view_model.summary[key][2] %} <span>
                <a href="{{ view_model.summary[key][3] }}"><i class="fas fa-hands-helping"></i></a></span>{% endif %}
            </td>
            {% elif key == "planner" %}
            <td class="has-text-left"><a href="{{ view_model.summary[key][2] }}">{{ view_model.summary[key][3] }}</a>
            </td>
            {% else %}
            <td class="has-text-left">{{ view_model.summary[key][1] }}
            </td>
            {% endif %}
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endmacro %}



{% macro query_plans(form, view_model) %}
<div class="section has-text-centered">
  <div class="columns is-centered">
    <div class="column is-one-third">
      <h1 class="title">
        Aktive Pläne
      </h1>
      {{ show_notifications() }}
      <form method="post">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div class="field">
          <div class="control">
            <div class="select is-large is-fullwidth">
              {{ form.select }}
            </div>
          </div>
          <p class="help">Suche in Plan-ID oder Produktname</p>
        </div>
        <div class="field">
          <div class="control">
            {{ form.search(class_="input is-large") }}
          </div>
        </div>
        <button class="button is-block is-primary is-large is-fullwidth">
          Suche
        </button>
      </form>
    </div>
  </div>
  {% if view_model.show_results %}
  <h1 class="title">
    Ergebnisse
  </h1>
  <div class="table-container">
    <table class="table is-fullwidth">
      <thead>
        <tr>
          <th>Plan-ID</th>
          <th>Produktname</th>
          <th>Betrieb</th>
          <th>Beschreibung</th>
          <th>Stückpr.</th>
          <th>Art</th>
          <th>Endet in</th>
          <th>Verfügbar</th>
        </tr>
      </thead>
      <tbody>
        {% for column in view_model.results.rows %}
        <tr>
          <td><a href="{{ column.plan_summary_url }}">{{ column.plan_id }}</a>
          </td>
          <td>{{ column.product_name }}</td>
          <td><a href="{{ column.company_summary_url }}">{{ column.company_name }}</a></td>
          <td>{% for paragraph in column.description %}{{ paragraph }}<br>{% endfor %}</td>
          <td>{{ column.price_per_unit }} {% if column.is_cooperating %} <span>
              <a href="{{ column.coop_summary_url }}"><i class="fas fa-hands-helping"></i></a></span>{% endif %}
          </td>
          <td>{{ column.type_of_plan }}</td>
          <td>{{ column.ends_in }}</td>
          {% if column.is_available %}
          <td>
            <span class="icon has-text-success"><i class="fas fa-circle"></i></span>
          </td>
          {% else %}
          <td>
            <span class="icon has-text-danger"><i class="fas fa-circle"></i></span>
          </td>
          {% endif %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% endif %}
</div>
{% endmacro %}


{% macro query_companies(form, view_model) %}
<div class="section has-text-centered">
  <h1 class="title">
    Betriebe suchen
  </h1>
  <div class="columns is-centered">
    <div class="column is-4">
      {{ show_notifications() }}
      <form method="post">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div class="field">
          <div class="control">
            <div class="select is-large is-fullwidth">
              {{ form.select }}
            </div>
          </div>
          <p class="help">Suche nach Name oder Email</p>
        </div>
        <div class="field">
          <div class="control">
            {{ form.search(class_="input is-large") }}
          </div>
        </div>
        <button class="button is-block is-primary is-large is-fullwidth">
          Suche
        </button>
      </form>
    </div>
  </div>
  {% if view_model.show_results %}
  <h1 class="title">
    Ergebnisse
  </h1>
  <div class="columns">
    <div class="column"></div>
    <div class="column is-8">
      <div class="table-container">
        <table class="table is-fullwidth">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
            </tr>
          </thead>
          <tbody>
            {% for column in view_model.results.rows %}
            <tr>
              <td><a href="{{ column.company_summary_url }}">{{ column.company_name }}</a></td>
              <td>{{ column.company_email }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <div class="column"></div>
  </div>
  {% endif %}
</div>
{% endmacro %}